===file:bugs/bug.sql, id:2, sql:[drop table if exists a_two]===
dble:[[]]
===file:bugs/bug.sql, id:3, sql:[CREATE TABLE a_two (id int(11) NOT NULL,c_flag char(255) DEFAULT NULL,c_decimal decimal(16,4) DEFAULT NULL,PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=utf8]===
dble:[[]]
===file:bugs/bug.sql, id:4, sql:[SELECT a.id, sum(a.c_decimal) AS c_decimal FROM a_two a GROUP BY a.id HAVING sum(a.c_decimal) != 0]===
dble:[[]]
===file:bugs/bug.sql, id:6, sql:[drop table if exists test1]===
dble:[[]]
===file:bugs/bug.sql, id:7, sql:[drop table if exists test2]===
dble:[[]]
===file:bugs/bug.sql, id:8, sql:[CREATE TABLE test1 (id bigint(11) NOT NULL,c_char char(255) DEFAULT NULL,PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=utf8]===
dble:[[]]
===file:bugs/bug.sql, id:9, sql:[CREATE TABLE test2 (id bigint(11) NOT NULL,c_char char(255) DEFAULT NULL,PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=utf8]===
dble:[[]]
===file:bugs/bug.sql, id:10, sql:[insert into test1 values(1,'1')]===
dble:[[]]
===file:bugs/bug.sql, id:11, sql:[insert into test1(id) values(2)]===
dble:[[]]
===file:bugs/bug.sql, id:12, sql:[insert into test2 values(1,'1')]===
dble:[[]]
===file:bugs/bug.sql, id:13, sql:[insert into test2(id) values(2)]===
dble:[[]]
===file:bugs/bug.sql, id:14, sql:[select * from test1 a inner join test2 b on a.c_char =b.c_char order by a.id]===
dble:[((1L, '1', 1L, '1'),)]
===file:bugs/bug.sql, id:15, sql:[select * from test1 a right join test2 b on a.c_char =b.c_char order by a.id]===
dble:[((None, None, 2L, None), (1L, '1', 1L, '1'))]
===file:bugs/bug.sql, id:16, sql:[select * from test1 a left join test2 b on a.c_char =b.c_char order by a.id]===
dble:[((1L, '1', 1L, '1'), (2L, None, None, None))]
===file:bugs/bug.sql, id:18, sql:[drop table if exists a_test]===
dble:[[]]
===file:bugs/bug.sql, id:19, sql:[drop table if exists a_order]===
dble:[[]]
===file:bugs/bug.sql, id:20, sql:[create table a_test(id int, trancode varchar(20), RETCODE char(2), OAPP varchar(20))]===
dble:[[]]
===file:bugs/bug.sql, id:21, sql:[create table a_order(id int, trancode varchar(20), RETCODE char(2), OAPP varchar(20))]===
dble:[[]]
===file:bugs/bug.sql, id:37, sql:[SELECT COUNT(*) FROM (
select test1.*
from mytest.a_test test1
where test1.trancode = 'ATS000010CHGEBUSSPTBNK'
AND test1.RETCODE = '0'
AND test1.OAPP != 'F-CLMS'
UNION
SELECT test2.*
FROM mytest.a_order test2
WHERE test2.trancode = 'ATS000008QRYBUSSPTGIFTLIST'
AND test2.RETCODE = '0'
AND test2.OAPP != 'F-CLMS'
) t3
]===
dble:[[(0L,)]]
===file:bugs/bug.sql, id:40, sql:[drop table if exists a_test]===
dble:[[]]
===file:bugs/bug.sql, id:41, sql:[drop table if exists a_order]===
dble:[[]]
===file:bugs/bug.sql, id:42, sql:[drop table if exists a_manager]===
dble:[[]]
===file:bugs/bug.sql, id:43, sql:[drop table if exists test_global]===
dble:[[]]
===file:bugs/bug.sql, id:44, sql:[create table a_test(id int primary key,name varchar(10))]===
dble:[[]]
===file:bugs/bug.sql, id:45, sql:[create table a_order(id int primary key,name varchar(10))]===
dble:[[]]
===file:bugs/bug.sql, id:46, sql:[create table a_manager(id int primary key,name varchar(10))]===
dble:[[]]
===file:bugs/bug.sql, id:47, sql:[create table test_global(id int primary key,name varchar(10))]===
dble:[[]]
===file:bugs/bug.sql, id:48, sql:[insert into a_test values(1,'actiontech')]===
dble:[[]]
===file:bugs/bug.sql, id:49, sql:[insert into a_order values(1,'actiontech')]===
dble:[[]]
===file:bugs/bug.sql, id:50, sql:[insert into a_manager values(1,'actiontech')]===
dble:[[]]
===file:bugs/bug.sql, id:51, sql:[insert into test_global values(1,'actiontech')]===
dble:[[]]
===file:bugs/bug.sql, id:52, sql:[select a.id,a.name from a_test a join a_order b where a.id=b.id union  select id,name from a_manager]===
dble:[[(1L, 'actiontech')]]
===file:bugs/bug.sql, id:53, sql:[select id,concat(id,'_',name)from a_test union all select id,concat(id,'_',name)from a_test]===
dble:[[(1L, '1_actiontech'), (1L, '1_actiontech')]]
===file:bugs/bug.sql, id:54, sql:[select a.id,concat(a.id,'_',a.name) from a_test a join a_order b where a.id=b.id union  select id,concat(id,'_',name)from a_manager]===
dble:[[(1L, '1_actiontech')]]
===file:bugs/bug.sql, id:55, sql:[select 1 union select id from a_test]===
dble:[[(1L,)]]
===file:bugs/bug.sql, id:56, sql:[select id from a_test union select 1]===
dble:[[(1L,)]]
===file:bugs/bug.sql, id:57, sql:[select 1 union select id from test_global]===
dble:[[(1L,)]]
===file:bugs/bug.sql, id:58, sql:[select id from test_global union SELECT 1]===
dble:[[(1L,)]]
===file:bugs/bug.sql, id:60, sql:[drop table if exists test_shard]===
dble:[[]]
===file:bugs/bug.sql, id:61, sql:[create table test_shard (id int(11) primary key,R_REGIONKEY float,R_NAME varchar(50),R_COMMENT varchar(50))]===
dble:[[]]
===file:bugs/bug.sql, id:62, sql:[insert into test_shard (id,R_REGIONKEY,R_NAME,R_COMMENT) values (1,1, 'a string','test001'),(3,3, 'another string','test003'),(2,2, 'a\nstring','test002'),(4,4, 'ä¸­','test004'),(5,5, 'a\'string\'','test005'),(6,6, 'a\""string\""','test006'),(7,7, 'a\bstring','test007'),(8,8, 'a\nstring','test008'),(9,9, 'a\rstring','test009'),(10,10, 'a\tstring','test010'),(11,11, 'a\zstring','test011'),(12,12, 'a\\string','test012'),(13,13, 'a\%string','test013'),(14,14, 'a\_string','test014'),(15,15, 'MySQL','test015'),(16,16, 'binary','test016'),(65,16, 'binary','test016'),(17,12345678901234567890123.4567890,17,17),(18,18, 'A','test018'),(19,19, '','test019')]===
dble:[[]]
===file:bugs/bug.sql, id:63, sql:[explain(select 1 from test_shard)union(select 2)/*allow_diff*/]===
dble:[[('distinct.1', 'DISTINCT', 'union_all.1'), ('dn1.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn2.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn3.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn4.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn5.0', 'BASE SQL', 'SELECT 2'), ('merge.1', 'MERGE', 'dn1.0; dn2.0; dn3.0; dn4.0'), ('merge.2', 'MERGE', 'dn5.0'), ('shuffle_field.1', 'SHUFFLE_FIELD', 'merge.1'), ('shuffle_field.2', 'SHUFFLE_FIELD', 'distinct.1'), ('union_all.1', 'UNION_ALL', 'shuffle_field.1; merge.2')]]
mysql:[[(None, 'UNION RESULT', '<union1,2>', None, 'ALL', None, None, None, None, None, None, 'Using temporary'), (1L, 'PRIMARY', 'test_shard', None, 'index', None, 'PRIMARY', '4', None, 18L, 100.0, 'Using index'), (2L, 'UNION', None, None, None, None, None, None, None, None, None, 'No tables used')]]
===file:bugs/bug.sql, id:64, sql:[explain (select 1 from test_shard)union(select 2)/*allow_diff*/]===
dble:[[('distinct.1', 'DISTINCT', 'union_all.1'), ('dn1.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn2.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn3.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn4.0', 'BASE SQL', 'select 1 from  `test_shard`'), ('dn5.0', 'BASE SQL', 'SELECT 2'), ('merge.1', 'MERGE', 'dn1.0; dn2.0; dn3.0; dn4.0'), ('merge.2', 'MERGE', 'dn5.0'), ('shuffle_field.1', 'SHUFFLE_FIELD', 'merge.1'), ('shuffle_field.2', 'SHUFFLE_FIELD', 'distinct.1'), ('union_all.1', 'UNION_ALL', 'shuffle_field.1; merge.2')]]
mysql:[[(None, 'UNION RESULT', '<union1,2>', None, 'ALL', None, None, None, None, None, None, 'Using temporary'), (1L, 'PRIMARY', 'test_shard', None, 'index', None, 'PRIMARY', '4', None, 18L, 100.0, 'Using index'), (2L, 'UNION', None, None, None, None, None, None, None, None, None, 'No tables used')]]
